% for getting the examples in the code really ...

\ExplSyntaxOn
\debug_on:n { check-declarations , deprecation }
\ExplSyntaxOff

\documentclass{article}

\input{regression-test}

\START

\typeout{========== UNDECLARED}
\ShowHook{HOOK NAME 0}
\ShowHookInfo{HOOK NAME 0}
\UseHook{HOOK NAME 0}
\typeout{========== + TOP LEVEL}
\AddToHook{HOOK NAME 0}{\typeout{[TOP LEVEL]}}
\ShowHook{HOOK NAME 0}
\ShowHookInfo{HOOK NAME 0}
\UseHook{HOOK NAME 0}
\typeout{========== + LABEL 1}
\AddToHook{HOOK NAME 0}[LABEL 1]{\typeout{[code 1]}}
\ShowHook{HOOK NAME 0}
\ShowHookInfo{HOOK NAME 0}
\UseHook{HOOK NAME 0}
\typeout{========== + LABEL 2}
\AddToHook{HOOK NAME 0}[LABEL 2]{\typeout{[code 2]}}
\ShowHook{HOOK NAME 0}
\ShowHookInfo{HOOK NAME 0}
\UseHook{HOOK NAME 0}
\typeout{========== + LABEL 3}
\AddToHook{HOOK NAME 0}[LABEL 3]{\typeout{[code 3]}}
\ShowHook{HOOK NAME 0}
\ShowHookInfo{HOOK NAME 0}
\UseHook{HOOK NAME 0}
\typeout{========== + NEXT}
\AddToHookNext{HOOK NAME 0}{\typeout{[Next only]}}
\ShowHook{HOOK NAME 0}
\ShowHookInfo{HOOK NAME 0}
\UseHook{HOOK NAME 0}
\typeout{========== LABEL 3 < LABEL 1}
\DeclareHookRule{HOOK NAME 0}{LABEL 3}{before}{LABEL 1}
\ShowHook{HOOK NAME 0}
\ShowHookInfo{HOOK NAME 0}
\UseHook{HOOK NAME 0}
\typeout{========== DEFAULT LABEL 2 > LABEL 3}
\DeclareDefaultHookRule{LABEL 2}{after}{LABEL 3}
\ShowHook{HOOK NAME 0}
\ShowHookInfo{HOOK NAME 0}
\UseHook{HOOK NAME 0}

\typeout{============================================}

\typeout{========== UNDECLARED}
\ShowHook{HOOK NAME}
\ShowHookInfo{HOOK NAME}
\UseHook{HOOK NAME}
\typeout{========== DECLARED EMPTY}
\NewHook{HOOK NAME}
\ShowHook{HOOK NAME}
\ShowHookInfo{HOOK NAME}
\UseHook{HOOK NAME}
\typeout{========== + TOP LEVEL}
\AddToHook{HOOK NAME}{\typeout{[TOP LEVEL]}}
\ShowHook{HOOK NAME}
\ShowHookInfo{HOOK NAME}
\UseHook{HOOK NAME}
\typeout{========== + LABEL 1}
\AddToHook{HOOK NAME}[LABEL 1]{\typeout{[code 1]}}
\ShowHook{HOOK NAME}
\ShowHookInfo{HOOK NAME}
\UseHook{HOOK NAME}
\typeout{========== + LABEL 2}
\AddToHook{HOOK NAME}[LABEL 2]{\typeout{[code 2]}}
\ShowHook{HOOK NAME}
\ShowHookInfo{HOOK NAME}
\UseHook{HOOK NAME}
\typeout{========== + LABEL 3}
\AddToHook{HOOK NAME}[LABEL 3]{\typeout{[code 3]}}
\ShowHook{HOOK NAME}
\ShowHookInfo{HOOK NAME}
\UseHook{HOOK NAME}
\typeout{========== + NEXT}
\AddToHookNext{HOOK NAME}{\typeout{[Next only]}}
\ShowHook{HOOK NAME}
\ShowHookInfo{HOOK NAME}
\UseHook{HOOK NAME}
\typeout{========== LABEL 3 < LABEL 1}
\DeclareHookRule{HOOK NAME}{LABEL 3}{before}{LABEL 1}
\ShowHook{HOOK NAME}
\ShowHookInfo{HOOK NAME}
\UseHook{HOOK NAME}
\typeout{========== DEFAULT LABEL 2 > LABEL 3}
\DeclareDefaultHookRule{LABEL 2}{after}{LABEL 3}
\ShowHook{HOOK NAME}
\ShowHookInfo{HOOK NAME}
\UseHook{HOOK NAME}

\typeout{============================================}

\typeout{========== UNDECLARED}
\ShowHook{EMAN KOOH}
\ShowHookInfo{EMAN KOOH}
\UseHook{EMAN KOOH}
\typeout{========== DECLARED REVERSED}
\NewReversedHook{EMAN KOOH}
\ShowHook{EMAN KOOH}
\ShowHookInfo{EMAN KOOH}
\UseHook{EMAN KOOH}
\typeout{========== + TOP LEVEL}
\AddToHook{EMAN KOOH}{\typeout{[TOP LEVEL]}}
\ShowHook{EMAN KOOH}
\ShowHookInfo{EMAN KOOH}
\UseHook{EMAN KOOH}
\typeout{========== + LABEL 1}
\AddToHook{EMAN KOOH}[LABEL 1]{\typeout{[code 1]}}
\ShowHook{EMAN KOOH}
\ShowHookInfo{EMAN KOOH}
\UseHook{EMAN KOOH}
\typeout{========== + LABEL 2}
\AddToHook{EMAN KOOH}[LABEL 2]{\typeout{[code 2]}}
\ShowHook{EMAN KOOH}
\ShowHookInfo{EMAN KOOH}
\UseHook{EMAN KOOH}
\typeout{========== + LABEL 3}
\AddToHook{EMAN KOOH}[LABEL 3]{\typeout{[code 3]}}
\ShowHook{EMAN KOOH}
\ShowHookInfo{EMAN KOOH}
\UseHook{EMAN KOOH}
\typeout{========== + NEXT}
\AddToHookNext{EMAN KOOH}{\typeout{[Next only]}}
\ShowHook{EMAN KOOH}
\ShowHookInfo{EMAN KOOH}
\UseHook{EMAN KOOH}
\typeout{========== + LABEL 3 < LABEL 1}
\DeclareHookRule{EMAN KOOH}{LABEL 3}{before}{LABEL 1}
\ShowHook{EMAN KOOH}
\ShowHookInfo{EMAN KOOH}
\UseHook{EMAN KOOH}
\typeout{========== + DEFAULT LABEL 2 > LABEL 3}
\DeclareDefaultHookRule{LABEL 2}{after}{LABEL 3}
\ShowHook{EMAN KOOH}
\ShowHookInfo{EMAN KOOH}
\UseHook{EMAN KOOH}

\typeout{============================================}

\typeout{UNKNOWN ENVIRONMENT}
\ShowHook{env/lthooks.regression test/before}
\ShowHookInfo{env/lthooks.regression test/before}
\typeout{CREATING ENVIRONMENT}
\NewDocumentEnvironment{lthooks.regression test}{}{}{}
\ShowHook{env/lthooks.regression test/before}
\ShowHookInfo{env/lthooks.regression test/before}

\typeout{============================================}

\typeout{========== GENERIC HOOK}

\ShowHook{GENERIC}
\ShowHookInfo{GENERIC}
\AddToHook{GENERIC}[LABEL]{\typeout{[CODE]}}
\ShowHook{GENERIC}
\ShowHookInfo{GENERIC}
\UseHook{GENERIC}
\typeout{========== ACTIVATE GENERIC HOOK}
\ActivateGenericHook{GENERIC}
\ShowHook{GENERIC}
\ShowHookInfo{GENERIC}
\UseHook{GENERIC}

\typeout{============================================}

\typeout{========== HOOK WITH ARGUMENTS A}

\ShowHook{HWA-a)}
\ShowHookInfo{HWA-a)}
\NewHookWithArguments{HWA-a)}{2}
\ShowHook{HWA-a)}
\ShowHookInfo{HWA-a)}

\typeout{============================================}


\typeout{!!!! If this test changes the documentation needs updating !!!!}

\END
